---
import { getCollection } from 'astro:content';
import Sidebar from '../components/Sidebar.astro';
import '../styles/global.css';

const posts = (await getCollection('blog')).sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
---

<html lang="en">
<head>
    <title>Nagpur Mail | Latest Stories</title>
</head>
<body>
    <div class="top-bar">Nagpur's #1 News Portal - Vidarbha Updates</div>
    
    <nav class="main-nav">
        <div class="container nav-content">
            <div class="logo"><img src="/logo.png" alt="NAGPUR MAIL"></div>
            <div style="display: flex; gap: 20px; font-weight: bold; font-size: 12px; color: #002b5c;">
                <span>HOME</span> <span>CITY</span> <span>BUSINESS</span> <span>METRO</span>
            </div>
        </div>
    </nav>

    <div class="container">
        <div class="main-wrapper">
            <main>
                <h2 class="widget-title" style="font-size: 20px;">Latest Stories</h2>
                {posts.map(post => (
                    <div class="news-card">
                        <div class="card-image" style={`background-image: url(${post.data.image})`}></div>
                        <div class="card-content">
                            <span class="category-tag">{post.data.category || 'News'}</span>
                            <a href={`/posts/${post.slug}`} class="card-title">{post.data.title}</a>
                            <p style="font-size: 13px; color: #666;">{post.data.description}</p>
                            <div style="font-size: 11px; margin-top: 10px; font-weight: bold; color: #999;">
                                By {post.data.author} â€¢ {post.data.pubDate.toDateString()}
                            </div>
                        </div>
                    </div>
                ))}
                <button style="width: 100%; background: #4285f4; color: white; padding: 12px; font-weight: bold; border: none; cursor: pointer;">+ LOAD MORE</button>
            </main>

            <Sidebar />
        </div>
    </div>
</body>
</html>
