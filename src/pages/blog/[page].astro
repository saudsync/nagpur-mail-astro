---
import Layout from '../../layouts/Layout.astro';
import { getCollection } from 'astro:content';

export async function getStaticPaths({ paginate }) {
  const allPosts = (await getCollection('blog')).sort(
    (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
  );
  // This tells Astro to put 5 posts per page
  return paginate(allPosts, { pageSize: 5 });
}

const { page } = Astro.props;
---
<Layout title={`Page ${page.currentPage}`}>
  <main class="max-w-4xl mx-auto px-4 py-8">
    <div class="space-y-10">
      {page.data.map((post) => (
        <article class="border-b pb-8">
          <a href={`/blog/${post.slug}/`}>
             <h2 class="text-2xl font-bold">{post.data.title}</h2>
          </a>
        </article>
      ))}
    </div>

    <div class="flex justify-between mt-10">
      {page.url.prev ? <a href={page.url.prev}>← Previous</a> : <div />}
      {page.url.next ? <a href={page.url.next}>Next Page →</a> : <div />}
    </div>
  </main>
</Layout>

